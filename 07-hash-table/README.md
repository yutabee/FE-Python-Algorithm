# ハッシュ表探索概要
ハッシュ表探索は、データ構造であるハッシュテーブル（またはハッシュマップ）を使用して、効率的に要素を検索、挿入、削除するアルゴリズムです。ハッシュ表探索の主な概要は以下のとおりです。

1. ハッシュ関数: ハッシュ表探索では、ハッシュ関数と呼ばれる特別な関数を使用して、各要素（キー）をハッシュ値（通常は整数）に変換します。ハッシュ関数は、同じキーに対しては同じハッシュ値を生成し、異なるキーに対しては異なるハッシュ値を生成することが望ましいです。

2. バケット: ハッシュ値を使用して、ハッシュテーブル内のバケット（データ格納用のスロット）にデータを格納します。ハッシュ値は、バケットのインデックスとして機能し、データの格納場所を特定します。

3. 衝突: 異なるキーが同じハッシュ値を生成し、同じバケットに割り当てられることがあります。この現象を衝突と呼びます。衝突を解決する一般的な方法には、チェイン法（連結リストを使用してバケット内で要素を格納）やオープンアドレッシング法（別の空きバケットに要素を格納）があります。

ハッシュ表探索の性能は、ハッシュ関数の品質や衝突解決戦略、ハッシュテーブルのサイズや負荷係数（格納されている要素数とバケット数の比率）によって影響を受けます。理想的な状況では、ハッシュ表探索は定数時間（O(1)）で実行されますが、衝突が多発する場合は、性能が低下することがあります。

# ハッシュテーブル

このプログラムは、Pythonでハッシュテーブルを実装したものです。ハッシュテーブルは、データを格納するためのデータ構造であり、キーと値のペアを保持します。このプログラムでは、名前と電話番号のペアをハッシュテーブルに格納し、名前を使って検索することができます。

## HashTableクラス

`HashTable` クラスは、ハッシュテーブルを表します。以下のメソッドを提供しています。

### `__init__(self, size)`

ハッシュテーブルのサイズを受け取り、指定されたサイズの空の配列を作成します。ここで、 `self.names` は名前を格納する配列であり、 `self.phone_numbers` は電話番号を格納する配列です。

### `calculate_hash(self, key)`

指定されたキーのハッシュ値を計算します。このプログラムでは、キーの各文字の Unicode 値の合計を取り、テーブルのサイズで割った余りをハッシュ値として使用しています。

### `insert(self, name, phone_number)`

名前と電話番号のペアをテーブルに挿入します。まず、 `calculate_hash` メソッドを使ってキーのハッシュ値を計算し、そのハッシュ値に対応するインデックスに名前と電話番号を格納します。もし既にそのインデックスにデータが格納されている場合は、`open_addressing` メソッドを呼び出して別の場所に格納します。

### `open_addressing(self, name, phone_number, hash_index)`

オープンアドレッシング法を使用して、既にインデックスにデータがある場合には、テーブル内の空きスペースを探してデータを格納します。

### `search(self, name)`

指定された名前の電話番号を検索します。まず、 `calculate_hash` メソッドを使ってキーのハッシュ値を計算し、そのハッシュ値に対応するインデックスに格納されている名前が指定された名前と一致する場合は、そのインデックスに格納されている電話番号を返します。名前が見つからない場合は、`None` を返します。インデックスにデータがあるが、指定された名前と一致しない場合は、 `search_rehash` メソッド呼び出して別の場所を検索します。

### `search_rehash(self, name, hash_index)`

オープンアドレッシング法を使用して、データがある場所から次々に次の場所を検索します。インデックスにデータがない場合は、最初に検索した場所に戻って `None` を返します。

## 実行例

以下は、このプログラムの実行例です。

```
hash_table = HashTable(5)

while True:
    name = input("Enter name: ")
    if name == "":
        break
    phone_number = input("Enter phone number: ")
    hash_table.insert(name, phone_number)

print(hash_table.names)
print(hash_table.phone_numbers)

while True:
    name = input("Enter name to search: ")
    if name == "":
        break
    phone_number = hash_table.search(name)
    if phone_number is None:
        print(f"{name} is not registered.")
    else:
        print(f"{name}'s phone number is {phone_number}.")
```

最初に、 `HashTable` オブジェクトを作成します。次に、 `insert` メソッドを使って名前と電話番号のペアをハッシュテーブルに挿入します。`insert` メソッドが成功すると、挿入されたデータのハッシュ値と格納されたインデックスが表示されます。

次に、 `search` メソッドを使って、指定された名前の電話番号を検索します。名前が見つかった場合は、その電話番号が表示されます。見つからなかった場合は、その旨が表示されます。

最後に、 `HashTable` オブジェクトに格納された名前と電話番号の配列が表示されます。