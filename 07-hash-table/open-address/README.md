# オープンアドレス法概要

オープンアドレッシング法は、ハッシュテーブルの衝突解決戦略の一つで、衝突が発生した場合に、別の空きスロットを見つけてデータを格納する方法です。オープンアドレッシング法では、ハッシュテーブル全体がデータの格納場所として利用されるため、チェイン法（衝突が発生した場合にリストや別のデータ構造を使って衝突を解決する方法）と比べてメモリ効率が高いとされています。

オープンアドレッシング法にはいくつかのバリエーションがありますが、以下に主なものをいくつか紹介します。

1. 線形探索（Linear Probing）：
   衝突が発生した場合、一定の間隔（通常は1）で次のスロットをチェックし、最初に見つかった空きスロットにデータを格納します。簡単で実装が容易ですが、一部のスロットにデータが集中するクラスタリング現象が起こりやすいという欠点があります。

2. 二次探索（Quadratic Probing）：
   衝突が発生した場合、二次関数（通常はi^2、iは試行回数）に従って次のスロットをチェックし、最初に見つかった空きスロットにデータを格納します。線形探索よりもクラスタリングが緩和されますが、完全に解決するわけではありません。

3. ダブルハッシング（Double Hashing）：
   衝突が発生した場合、別のハッシュ関数を使って次のスロットを決定し、最初に見つかった空きスロットにデータを格納します。クラスタリングが大幅に緩和され、より良いパフォーマンスが得られますが、実装がやや複雑になります。

オープンアドレッシング法は、挿入、検索、削除の各操作で衝突解決を行う必要があります。特に、削除の際には、データの移動が発生することがあり、実装が複雑になることがあります。ただし、適切な衝突解決戦略を選択すれば、高いパフォーマンスを維持しながらハッシュテーブルを使用することがで

# ホームレコードとシノニムレコード

シノニムレコードとホームレコードは、ハッシュテーブルの衝突解決戦略であるオープンアドレッシング法において使用される用語です。

- ホームレコード（Home Record）: ハッシュ関数によって計算されたインデックスに格納されるべきレコードです。ホームレコードは、キーがハッシュ関数を通じて直接マップされるインデックス位置に存在することが期待されています。衝突が発生しない場合、レコードはそのホームポジションに格納されます。

- シノニムレコード（Synonym Record）: 衝突の結果としてホームレコード以外の位置に格納されるレコードです。オープンアドレッシング法では、衝突が発生した場合に、空きスロットが見つかるまでハッシュテーブル内の別の位置を探索することになります。空きスロットが見つかった場所に格納されるレコードがシノニムレコードです。

オープンアドレッシング法では、ホームレコードとシノニムレコードの区別が重要です。なぜなら、衝突解決のプロセス中に適切なレコードを検索・削除・挿入するために、これらの情報が役立つからです。オープンアドレッシング法の一般的なバリエーションには、線形探査法、二次探査法、およびダブルハッシュ法があります。これらは、衝突が発生した場合のハッシュテーブル内の探索方法が異なります。

# 解説
このコードは、名前と電話番号を格納および検索するためのハッシュテーブルを実装するPythonクラス `HashTable` を定義しています。オープンアドレッシング法を使用して、ハッシュ値の衝突を解決します。

1. `__init__(self, size)`: インスタンスの初期化時にハッシュテーブルのサイズを設定し、`names` と `phone_numbers` のリストをサイズに基づいて初期化します。

2. `_hash(self, key)`: 文字列からハッシュ値を計算するプライベートメソッドです。与えられた文字列（この場合は名前）の文字のUnicodeコードポイントの合計を計算し、ハッシュテーブルのサイズで割った余りを返します。

3. `insert(self, name, phone_number)`: 名前と電話番号をハッシュテーブルに格納するメソッドです。名前からハッシュ値を計算し、対応するインデックスにデータがなければ格納します。衝突が発生した場合、`open_addressing` メソッドを呼び出して解決します。

4. `open_addressing(self, name, phone_number, hash_index)`: オープンアドレッシング法を使用して、名前と電話番号をハッシュテーブルに格納するメソッドです。ハッシュテーブルを走査し、空きが見つかったらデータを格納します。空きがなければ、データの格納ができないことを通知します。

5. `search(self, name)`: 指定された名前に関連付けられた電話番号を検索するメソッドです。名前からハッシュ値を計算し、対応するインデックスにデータがあれば返します。衝突が発生している場合、`search_rehash` メソッドを呼び出して検索を続行します。

6. `search_rehash(self, name, hash_index)`: オープンアドレッシング法を使用して、指定された名前に関連付けられた電話番号を検索するメソッドです。ハッシュテーブルを走査し、一致する名前が見つかったら対応する電話番号を返します。見つからなければ、`None` を返します。

このクラスを使用することで、名前と電話番号のペアを格納および検索するハッシュテーブルを簡単に実装できます。オープンアドレッシング法を使って衝突を解決することで、データの挿入や検索が効率的に行われます。ただし、ハッシュテーブルが満杯になると、新しいデータの挿入ができなくなるため、適切なサイズのハッシュテーブルを選択することが重要です。

以下は、この `HashTable` クラスを使ってデータを格納し、検索する例です。

```python
# インスタンス化
hash_table = HashTable(10)

# データの挿入
hash_table.insert("Alice", "555-1234")
hash_table.insert("Bob", "555-5678")
hash_table.insert("Eve", "555-7777")

# データの検索
print(hash_table.search("Alice"))  # "555-1234"
print(hash_table.search("Bob"))    # "555-5678"
print(hash_table.search("Eve"))    # "555-7777"
print(hash_table.search("Charlie"))  # None
```

この例では、`HashTable` クラスのインスタンスを作成し、サイズを10と設定しています。その後、3つの名前と電話番号のペアをハッシュテーブルに挿入しています。挿入後、`search` メソッドを使って各名前に関連付けられた電話番号を検索し、見つかった場合は電話番号が表示され、見つからない場合は `None` が表示されます。